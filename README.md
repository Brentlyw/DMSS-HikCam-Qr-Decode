# DMSS-Hikcam QR Decoding Tool

A unified tool for decoding and extracting information from QR codes used by P2P camera systems, particularly those generated by HikVision and similar DMSS-based systems.

## Features

- Extract device information from QR codes in images
- Process strings directly from QR codes
- Batch processing of multiple QR code images
- Support for both HikVision QR formats and other DMSS-based QR formats
- Decryption of encoded credentials and device information

## Installation

### Prerequisites

- Python 3.6+
- Required Python packages:
  - Pillow
  - pyzbar
  - pyaes

### Setup

1. Clone this repository:
   ```
   git clone https://github.com/yourusername/dmss-decode-tool.git
   cd dmss-decode-tool
   ```

2. Install the required dependencies:
   ```
   pip install pillow pyzbar pyaes
   ```

3. On Linux/macOS systems, make the script executable:
   ```
   chmod +x dmss_decode.py
   ```

## Usage

The tool can be used in three different modes:

### 1. Process a QR code string directly

```
python dmss_decode.py -s "QRC03010003..."
```

### 2. Process a single QR code image

```
python dmss_decode.py -qr /path/to/qrcode.jpg
```

### 3. Process all QR code images in a folder

```
python dmss_decode.py -qrf /path/to/folder
```

## Output

The tool outputs JSON-formatted data containing details about the devices encoded in the QR code, including:

- Device name
- IP address
- Port
- Username
- Password
- End-to-end password (for HikVision devices)
- Timestamp when the QR code was created

Example output:

```json
{
    "header": "QRC03010003",
    "e2e_password": "p@ssw0rd",
    "timestamp_created": 1646753422,
    "timestamp_iso": "2022-03-08T12:37:02",
    "local_devices": [
        {
            "name": "Front Door Camera",
            "ip_address": "192.168.1.100",
            "port": 8000,
            "username": "admin",
            "password": "admin123"
        }
    ]
}
```

## How It Works

The tool supports two main types of QR codes:

1. HikVision QR codes (starting with "QRC03010003" or "QRC03010002"):
   - These use a custom encryption scheme based on AES
   - The tool decrypts the credentials and device information

2. Other DMSS-based QR codes:
   - These typically use base64 encoding and gzip compression
   - The tool decompresses and decodes the information

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Disclaimer

This tool is provided for educational and legitimate security research purposes only. Always ensure you have proper authorization before accessing any surveillance systems. The authors are not responsible for any misuse of this tool.
